<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" href="form.css" />
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6"
			crossorigin="anonymous"
		/>
		<title>formulaire</title>
	</head>
	<body>
		<div class="container">
			<h2>Formulaire</h2>
			<label for="">Nom </label>
			<input
				id="nom"
				type="text"
				name="nom"
				placeholder="Enter your name"
			/>
			<label for="">Prenom </label>
			<input
				type="text"
				name="prenom"
				placeholder="Enter your first name"
			/>
			<label for="">salaire </label>
			<input
				id="salery"
				type="text"
				name="salaire"
				placeholder="Enter your salery"
			/>
			<h5 class="m-3">statut familial</h5>
			<div class="wrapper">
				<label for=""
					>Marié : <input type="radio" id="radioM" name="radio"
				/></label>
				<label for=""
					>célebataire : <input type="radio" id="radioS" name="radio"
				/></label>
			</div>
			<div id="marriedWrapper" class="marriedWrapper">
				<label for="">nom epouse </label>
				<input
					type="text"
					name="nomE"
					placeholder="Enter your spouse name"
				/>
				<h5 class="m-3">information sur vos enfants</h5>
				<label for="">nombre d'enfants </label>
				<input
					id="nEnfant"
					type="text"
					name="nEnfant"
					placeholder="Enter how many shildren you have"
				/>
				<button
					id="shildrenButton"
					type="button"
					class="btn btn-primary m-2"
				>
					Enter
				</button>
			</div>
			<button
				style="display: none"
				id="entershildren"
				class="btn btn-danger m-2"
			>
				submit
			</button>
			<div id="displayRaise" class="displayRaise"></div>
		</div>
	</body>

	<script>
		document.getElementById("radioM").addEventListener("click", married);
		document.getElementById("radioS").addEventListener("click", singal);

		function married() {
			console.log("married");
			document.getElementById("marriedWrapper").style.display = "flex";
		}
		function singal() {
			console.log("single");
			document.getElementById("marriedWrapper").style.display = "none";
		}

		document
			.getElementById("shildrenButton")
			.addEventListener("click", shildren);

		var numbersTable = new Array(
			"première",
			"deuxième",
			"troisième",
			"quatrième",
			"cinquième",
			"sixieme",
			"septième",
			"huitième",
			"neuvième",
			"dixième",
			"onzième",
			"douzième",
			"treizième",
			"quatorzième",
			"quinzième",
			"seizième",
			"dix-septième",
			"dix-huitième",
			"dix-neuvième",
			"vingtième"
		);
		function shildren() {
			document.getElementById("entershildren").style.display = "block";
			var x = document.querySelector("#nEnfant").value;
			for (var i = 0; i < x; i++) {
				var content = `<br><label for="">Entrer l'age du ${numbersTable[i]} enfant : </label><input placeholder="Enter l'age du ${numbersTable[i]} enfant" id="ageEnfant" type="text">`;
				document.querySelector(
					".marriedWrapper"
				).innerHTML += content.repeat(1);
			}
		}
		document
			.getElementById("entershildren")
			.addEventListener("click", calculation);

		function calculation() {
			console.log("calculation");
			var inputsAge = document.querySelectorAll("#ageEnfant");
			var len = inputsAge.length;
			var age = [];
			//fetshing student by age
			var x = document.getElementById("salery").value;
			var w = parseFloat(x) - (parseFloat(x) * 15) / 100;
			for (var i = 0; i < len; i++) {
				age[i] = inputsAge[i].value;
				parseInt(age.value);
				console.log("element number " + i + " : " + age[i]);
				//test of case by age
				if (age[i] < 5) {
					var raise = (parseFloat(w) * 3) / 100;
					document.getElementById("displayRaise").innerHTML +=
						" l'aventage pour votre " +
						numbersTable[i] +
						" enfant et 3% : " +
						raise +
						" DH" +
						"<br>";
				} else if (age[i] < 12 && age[i] >= 5) {
					var raise = (parseFloat(w) * 5) / 100;
					document.getElementById("displayRaise").innerHTML +=
						"l'aventage pour votre " +
						numbersTable[i] +
						" enfant et 5% : " +
						raise +
						" DH" +
						"<br>";
				} else if (age[i] <= 24 && age[i] >= 12) {
					var raise = (parseFloat(w) * 7) / 100;
					document.getElementById("displayRaise").innerHTML +=
						"l'aventage pour votre " +
						numbersTable[i] +
						" enfant et 7% : " +
						raise +
						" DH" +
						"<br>";
				} else {
					document.getElementById("displayRaise").innerHTML +=
						"pas d'aventage pour votre " +
						numbersTable[i] +
						" enfant l'age depase 24 ans";
				}
			}
		}
	</script>
</html>
